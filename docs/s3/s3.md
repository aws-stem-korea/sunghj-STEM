# S3 실습
## Amazon S3(Simple Storage Servicee)에 대하여

![S3](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.001.png)

Amazon Simple Storage Service(S3)는 웹 상의 어디서나 언제든지 원하는 양의 데이터를 저장하고 검색할 수 있는 간편한 웹 서비스 인터페이스를 제공합니다.

이 실습은 AWS 콘솔을 통해 S3와 상호 작용하는 방법과 EC2 웹 호스팅을 통해 볼 수 있도록 개인 S3 버킷 내의 개체에 대한 액세스를 설정하는 방법을 시연하기 위해 설계되었습니다.

아래의 순서대로 실습을 진행합니다:
1. 버킷(bucket) 생성하기
2. 객체(object) 생성하기
3. 객체 작업하기
4. 버킷 관리하기
   - 버킷 버전(versioning) 설정
   - 버킷 수명 주기(life cycle) 설정
5. 정적 호스팅하기
6. 실습 자원 삭제하기

# [1] S3 버킷 생성
## S3 버킷 생성하기

> 버킷을 생성하는 자체는 과금이 되지 않습니다. 버킷에 객체를 저장하고 버킷 안팎으로 객체를 전송하는 경우에만 요금이 부과됩니다.

1. 검색 창에서 S3를 찾거나 좌측 상단 Services 메뉴에서 "Storage" 아래에 S3를 선택하거나 [여기](https://console.aws.amazon.com/s3/home) 를 클릭합니다.

2. **Create Bucket** 버튼을 클릭합니다. 버킷 생성 작업을 위한 "Create bucket" 페이지로 이동됩니다.
   
    ![create_bucket](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.002.png)


3. "Bucket name" 필드에 이름을 입력합니다. 이번 실습에서는 버킷의 이름은 **`<name>-aws-s3-lab`** 으로 설정하겠습니다. 
   
   - `<name>` 자리에는 본인의 이름을 작성하면 됩니다.
   - Region(리전)은 

    - 버킷 이름은 Amazon S3에 존재하는 모든 버킷 이름 으로부터 고유해야 합니다. 버킷 이름을 고유하게 만드는 한 가지 방법은 버킷 이름에 이니셜과 조직의 이름을 접두사로 붙이는 것입니다. 
      - 예: `[your initials]-[your org]-s3-lab`
   
   - 버킷 이름은 다음의 요구 사항을 준수해야 합니다:
      - 소문자, 숫자, 마침표(.) 및 대시(-)만 포함할 수 있습니다(대문자 없음!).
      - 숫자 또는 문자로 시작해야 합니다.
      - 3자에서 255자 사이여야 합니다.
      - IP 주소 형색은 불가능 합니다(예: 265.255.5.4).

4. **Region** 드롭다운 목록에서 CloudFormation을 사용하여 웹 호스팅을 수행한 리전과 동일한 값을 선택합니다.
   
5. 다음 항목은 "Block Public Access settings for this bucket" 입니다. 본 실습에서는 프라이빗 버킷으로 작업을 수행할 예정이기 때문에 **Block *all* public access** 체크된 상태로 둡니다. 사용자와 애플리케이션이 고유한 DNS 주소를 통해, 버킷 내의 객체에 접근할 수 있도록 버킷을 설정할 수 있습니다. 하지만 본 실습에서는 해당 작업을 하지 않습니다. 다음 챕터에서 버킷을 퍼블릭하게 두지 않고 객체에 접근할 수 있도록 설정할 것입니다.
   
6. 나머지 설정은 일단 기본값으로 둡니다. 다른 실습에서 버킷의 버전 관리를 사용하도록 설정할 예정입니다.. 이제 **Create bucket** 버튼을 클릭합니다.

    ![create_bucket_2](https://static.us-east-1.prod.workshops.aws/public/444df362-a211-4686-869b-77496f0dd3be/static/images/storage/3-create-bucket-form.png?classes=lab_picture_small)


7. 이제 S3 버킷 리스트가 있는 페이지로 돌아와 방금 생성한 버킷을 클릭합니다.

    ![click_bucket](https://static.us-east-1.prod.workshops.aws/public/444df362-a211-4686-869b-77496f0dd3be/static/images/storage/4-bucket-name.png)

8. 버킷의 개요 페이지가 표시됩니다. 해당 버킷은 "Objects (0)" 값을 가집니다.

    ![bucket_data](https://static.us-east-1.prod.workshops.aws/public/444df362-a211-4686-869b-77496f0dd3be/static/images/storage/5-bucket-empty.png)

# [2] S3 버킷에 객체 추가하기
생성한 버킷에 객체를 추가해봅시다!

객체는 텍스트 파일, 사진, 비디오 등 모든 종류의 파일이 될 수 있습니다. Amazon S3에 파일을 추가할 때, 파일에 메타데이터를 포함하고 파일에 대한 액세스를 제어하는 권한을 설정할 수 있습니다.

## 객체 추가

1. 본 실습에서는 앞서 생성한 버킷에 7장의 사진을 업로드할 것입니다. 압축 파일을 다운로드 받고 로컬 하드 드라이브에 저장합니다. 
   - 압축 파일: [photos.zip](https://stem-s3-version.s3.ap-northeast-2.amazonaws.com/photo.zip)

2. photos.zip 파일에는 "photo1.jpg"부터 "photo7.jpg"까지 7개의 파일과 "photo1.jpg"파일이 저장된 "V2" 폴더를 확인할 수 있습니다.


3. 생성한 버킷 페이지에서 "Objects"(객체)탭에 있는 **Upload** 버튼을 클릭합니다.

    ![upload_click](https://static.us-east-1.prod.workshops.aws/public/444df362-a211-4686-869b-77496f0dd3be/static/images/storage/6.1-bucket-empty.png)

4. 업로드할 파일을 선택하기 위해 **Add Files** 버튼을 클릭합니다. "photo1.jpg"부터 "photo7.jpg"까지 업로드합니다. 단, "V2" 폴더에 있는 "photo1.jpg" 파일은 업로드하지 않습니다. 해당 파일은 추후 실습에서 사용할 예정입니다.

    ![upload_1](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.008.png)

    이미지를 선택한 후, "Upload" 작업을 수행하면 선택한 파일 리스트가 아래의 화면과 같이 보입니다.

    ![upload_2](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.009.png)

    페이지 하단에서 "Permissions", "Properties" 옆의 화살표를 클릭하여 파일을 업로드하기 위한 추가 옵션을 설정할 수 있습니다.

    ![upload_3](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.010.png)

5. 업로드할 파일을 선택하기 위해 **Add Files** 버튼을 클릭합니다. "photo1.jpg"부터 "photo7.jpg"까지 업로드합니다. 단, "V2" 폴더에 있는 "photo1.jpg" 파일은 업로드하지 않습니다. 해당 파일은 추후 실습에서 사용할 예정입니다.

    ![upload_1](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.008.png)

    이미지를 선택한 후, "Upload" 작업을 수행하면 선택한 파일 리스트가 아래의 화면과 같이 보입니다.

    ![upload_2](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.009.png)

    페이지 하단에서 "Permissions", "Properties" 옆의 화살표를 클릭하여 파일을 업로드하기 위한 추가 옵션을 설정할 수 있습니다.

    ![upload_3](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.010.png)


   
6. 업로드 옵션을 사용하여 스토리지 클래스, 암호화, 태그, 메타데이터 등을 설정할 수 있습니다. 사용 사례에 따라 다른 스토리지 클래스를 선택할 수도 있지만, 본 실습에서는 스탠다드 스토리지 클래스를 사용할 것입니다. 다른 모든 설정은 기본값으로 둡니다.
  
    페이지 아래의 **Upload** 버튼을 클릭합니다.

    ![upload_click](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.011.png)

    업로드되는 이미지는 페이지 상단에 표시됩니다.

    ![image_check](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.012.png)

    업로드가 완료되면 "Upload succeeded"이 표시됩니다.

    ![upload_success](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.013.png)

7. 이제 Close 버튼을 클릭하여 버킷 개요 페이지로 돌아갑니다. 이제 S3의 객체(object)가 된 7장의 사진을 버킷에서 모두 볼 수 있습니다.

    ![check_list](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.014.png)

이제 우리가 만든 아키텍처의 구조는 아래와 같아졌습니다!

![img_1](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.015.png)

# [3] S3 콘솔에서 객체 작업하기
S3 콘솔은 많은 익숙한 파일 시스템 명령을 제공합니다. 이름 변경, 이동, 복사, 삭제, 보기 등의 작업을 수행할 수 있습니다.

또한, 폴더("prefix"라고 알려져 있음) 생성, 메타데이터 추가 및 제거, 스토리지 클래스 변경, S3 URI 혹은 객체 URL 복사 등의 작업을 수행할 수 있습니다. 본 실습에서 위의 내용을 수행할 예정입니다.

![img_2](https://static.us-east-1.prod.workshops.aws/public/444df362-a211-4686-869b-77496f0dd3be/static/images/storage/11.1-s3-bucket-actions.png)

## S3에 있는 객체 이동시키기
S3 콘솔에서 이동 작업을 수행하면 같은 버킷의 폴더(prefix)로, 다른 버킷의 폴더로, 혹은 액세스 포인트로 객체를 이동시킬 수 있습니다. 아래의 작업에서 새로운 폴더를 생성한 후, photo7.jpg 객체를 이동시켜 봅니다.

1. 생성한 버킷 페이지에서 **Create folder** 버튼을 클릭합니다.

2. "Folder name" 필드에 "photo7" 이름을 입력하고 **Create folder** 버튼을 클릭합니다.

    ![create_folder_click](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.017.png)

3. "photo7.jpg" 객체를 선택한 후, **Actions** 드롭다운을 클릭하고 **Move를** 선택합니다.

   ![move_click](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.018.png)

4. "Destination type"에서 **Bucket**을 선택하고 **Browser S3**를 클릭합니다.

5. "Destination" 팝업창에서 **photo7/폴더(prefix)**를 클릭하고 **Choose destination** 버튼을 클릭합니다.

   ![choose_dst_click](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.020.png)

6. Destination 값이 설정되었고, **Move** 버튼을 클릭해 객체를 이동시킵니다.

   ![move_object](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.021.png)

7. "Move: status" 페이지에서 "Successfully moved objects"를 확인할 수 있습니다. **Close** 버튼을 통해 해당 페이지를 닫습니다. 

   ![close_click](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.022.png)

8. "photo7/" 폴더를 클릭하고, "photo7.jpg"가 이동한 것을 확인할 수 있습니다.

> 객체를 이동하면 지정된 위치에 업데이트된 설정과 마지막으로 수정된 새 날짜가 포함된 객체의 복사본이 생성된 다음 삭제 마커를 원래 객체에 추가하는 방식으로 작동합니다.

9. 객체를 복사하는 작업도 비슷하며 특정 객체를 선택한 후, **Actions**와 **Copy** 버튼을 사용합니다.

"Move" 명령은 익숙한 파일 시스템 명령 중 하나입니다. 컴퓨터에 직접 파일을 "Download"하거나, 브라우저에서 직접 "Rename objects" 또는 "Open" 등의 작업을 수행할 수 있습니다.

## S3에 특정한 객체 작업

S3 객체에 수행할 수 있는 몇 가지 작업이 있습니다:
- **Copy S3 URI**
  
  : S3 URI는 일부 AWS 서비스에서 버킷 및 개체에 액세스할 때 내부 주소 역할을 합니다.

- **Copy URL**
  
  : 객체를 프라이빗으로 설정해도 버킷과 객체는 모두 URL을 가지고 있습니다. 예: "us-west-2" 리전에 위치한 "abc-aws-s3-lab" 버킷에 있는 "photo1.jpg"의 경우 다음과 같은 URL을 가집니다: `https://abc-aws-s3-lab.s3.us-west-2.amazonaws.com/photo1.jpg `

- **Edit storage class**
  
  : 객체에 대한 스토리지 클래스를 변경합니다. 사용 목적에 맞는 Life Cycle 정책에 따라 수행하는 것이 모범 사례입니다. 더 자세한 내용을 읽어보고 싶다면 [이 문서](https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/userguide/storage-class-intro.html)에서 확인하실 수 있습니다!
- **Edit metadata**
  
  : 객체 메타데이터는 키-값 페어로 이루어져 있습니다. 이 작업은 업데이트된 셋팅과 마지막으로 수정된 새 날짜로 새로운 버전의 객체를 생성합니다.

- **Edit tags**
  
  : 버킷 또는 개체에 태그를 지정하여 스토리지 비용 또는 기타 기준을 추적할 수 있습니다.

![storage_check](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.023.png)

# [4] 버킷 관리하기
## 버킷 Versioning 활성화
Versioning은 특정 객체에 여러 버전을 유지하는 수단입니다. 버전 관리를 사용하여 Amazon S3 버킷에 저장된 모든 객체의 버전을 보존, 검색 및 복원할 수 있습니다. 버전 관리를 사용하면 의도하지 않은 사용자 작업과 응용 프로그램 오류 모두 쉽게 복구할 수 있습니다.

> 버킷 수준에서 버전 관리를 사용하도록 설정하고 일시 중단할 수 있습니다. 버킷에서 버전을 사용하도록 설정한 후에는 버킷이 버전 설정 해제 상태로 돌아갈 수 없습니다. 대신 버전 관리 일시 중지 설정은 가능합니다.

1. S3 콘솔의 왼쪽에 있는 **Buckets** 를 클릭합니다. 이전 실습에서 생성한 버킷을 클릭하고, **Properties** 탭을 선택합니다. "Bucket Versioning" 아래의 Edit 버튼을 클릭합니다.
   
   ![bucket_versioning_edit](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.024.png)

2. Enable 라디오 버튼을 선택하고 Save Changes 를 클릭합니다.
   
   ![versioning_save_changes](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.025.png)

   이제 버킷 버전 관리 기능이 "Enabled" 되었습니다.

   ![versioning_enable](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.026.png)

3. "Objects" 탭으로 돌아가서 **Upload**를 선택합니다.

4. 이전 실습에서 이미지를 다운 받은 폴더로 가서 "V2" 폴더에 있는 "photo1.jpg" 파일을 이전 실습("S3 버킷에 객체 추가하기")에서처럼 S3 버킷에 업로드 합니다. 이전에 photo1.jpg을 저장한 같은 위치에 파일을 저장해야 합니다.

   ![upload_file](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.027.png)

5. 언뜻 보기에 photo1.jpg의 "Last modified" 날짜 외에는 변한 것이 없어보입니다(다른 이미지보다 최신 날짜 및 시간으로 표시되어 있는 것을 확인할 수 있습니다).
   
   버킷 컨텐츠 위에 "Show Versions"라는 토클 버튼이 활성화되면 각 객체의 버전을 확인할 수 있습니다.
   
   ![version_check](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.028.png)

6. 이제 여러분들은 "Version ID" 컬럼을 확인할 수 있으며 "photo1.jpg"의 경우, 두 개의 다른 버전이 있는 것을 확인할 수 있습니다. 새로운 버전은 유니크한 "Version ID"를 가지고 있으며 그외 다른 객체의 Version ID는 모두 "null"인 것을 확인할 수 있습니다. 이제 파일에 접근할 때, 새로운 버전의 "photo1.jpg"가 보일 것입니다.

   ![version_check_2](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.029.png)

Versioning을 활성화하면 객체의 버전은 기본적으로 무제한으로 허용됩니다. 객체 버전을 관리하는 방법 중 하나는 Life Cycle(수명 주기) 정책을 설정하는 것입니다. 

## Life Cycle (수명 주기) 설정

수명 주기 정책을 사용하여 객체의 수명 동안 수행할 작업을 정의할 수 있습니다(예: 객체를 다른 스토리지 클래스로 전환, 객체 아카이빙 또는 지정된 기간 후 객체 삭제).

버전 설정을 활성화한 버킷에는 현재 버전 하나와 0 개 또는 그 이상의 구 버전의 객체가 존재할 수 있습니다. 수명 주기 정책을 사용하여 현재 버전 및 구 버전 관련된 작업을 정의할 수 있습니다.

30일 후에 객체 현재 버전이 아닌 이전 버전을 S3 IA(Infrequent Access) 계층으로 이동한 다음 30일 후에 삭제하는 라이프사이클 정책을 설정할 예정입니다.

1. 버킷 페이지에서 Management 탭을 클릭합니다.

2. "Lifecycle rules" 아래에 Create lifecycle rule 버튼을 클릭합니다.

   ![create_life_cycle](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.030.png)

3. `<name> - S3 Lifecycle policy`라고 이름을 작성한 다음, 해당 규칙을 적용할 범위를 **This rule applies to *all* objects in the bucket** 로 설정하고 경고 사항에 대해 인지했다는 것을 **체크** 합니다. Prefix 혹은 객체 태그에 따라 조금더 정밀한 규칙을 셋팅할 수 있지만 본 실습에서는 버킷에 있는 모든 객체에 대해 적용하는 방식으로 진행합니다.

4. "Lifecycle rule actions" 아래에 **Transition *previous* versions of objects between storage classes** 와 **Permanently delete *previous* versions of objects** 를 체크합니다. "previous" 버전 관련 규칙을 설정하면 새로운 버전의 객체에 의해 이전 버전으로 대체될 때 이런 작업이 수행된다는 것을 의미합니다.

5. "Transition noncurrent versions of objects between storage classes" 아래에서 "Storage class transitions"에 **Standard-IA** 를 선택합니다. "Day after objects become noncurrent"에는 30을 입력합니다.
   
   이 규칙은 객체가 구 버전으로 변경된 후, 30일이 지나면 S3-Standard에서 S3-IA로 변경된다는 것을 의미합니다. 이런 규칙은 처음 업로드 후, 30일 동안은 자주 액세스하지만 그 이후에는 가끔씩만 액세스하는 경우에 비용 절감 측면에서 효과적입니다.

6. "Permanently delete previous versions of objects"에서 60을 입력합니다. 이는 구 버전이 된 이후, 60일이 지나면 객체를 삭제한다는 의미입니다(30일 이후에는 S3-IA로 이동).

7. 아래에 있는 Timeline summary를 보면 현재 설정한 규칙을 시각적으로 확인할 수 있습니다. 검토가 끝나면 **Create rule** 버튼을 클릭합니다.
   
   ![create_rule](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.031.png)

8. 이제 객체가 구 버전이 된 이후, 30일이 지나면 S3-IA로 그리고 또 30일이 지나면 삭제되는 수명 주기 정책을 설정했습니다.

   ![life_cycle](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.032.png)

# [5] 정적 웹 호스팅
> 버킷이 정상적으로 생성 되었다면 오브젝트를 추가할 준비가 되었습니다. 오브젝트는 텍스트 파일, 이미지 파일 및 비디오 파일 등 모든 종류의 파일이 될 수 있습니다. Amazon S3에 파일을 추가할 때, 해당 파일에 대한 권한 및 접근 설정 등에 대한 정보를 메타데이터에 포함시킬 수 있습니다.

이번 실습은 S3를 통해, 정적 웹사이트를 호스팅합니다. 해당 정적 웹사이트는 특정 이미지를 클릭하면 VPC Lab에서 생성한 인스턴스로 리다이렉팅하는 역할을 합니다. 따라서 이미지 파일 1개, HTML 파일 1개, ALB DNS name을 준비합니다.

실습을 시작하기에 앞서, `stem-day-<name>`이라는 이름을 가지는 S3 버킷을 생성해주세요!

## 정적 웹 호스팅을 위한 오브젝트 추가

1. [aws.png](https://static.us-east-1.prod.workshops.aws/public/444df362-a211-4686-869b-77496f0dd3be/static/common/s3_advanced_lab/aws.png) 이미지 파일을 다운로드하여 `aws.png`로 저장합니다.
   
2. 아래의 소스코드를 이용하여 `index.html`을 작성합니다.
   ``` html
   <html>
        <head>
            <meta charset="utf-8">
            <title> AWS General Immersion Day S3 HoL </title>
        </head>
        <body>
            <center>
            <br>
            <h2> Click image to be redirected to the EC2 instance that you created </h2>
            <img src="S3에 업로드될 이미지 접근 URL" onclick="window.location='DNS 이름'"/>
            </center>
        </body>
    </html>
   ```
   
   위의 HTML 코드는 메모장(Notes)를 열어서 해당 코드를 Copy & Paste (복사 및 붙여넣기)로 붙여넣습니다.
   
   그리고 **File** > **Save As** 를 눌러서 해당 명은 index.html 로 save file type 은 All Files (*.*) 로 저장합니다.  

   ![word_pad](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.036.png)

3. `aws.png`파일을 S3로 업로드합니다. 방금 생성한 S3 버킷을 클릭합니다. 

   ![bucket_click](https://static.us-east-1.prod.workshops.aws/public/444df362-a211-4686-869b-77496f0dd3be/static/images/advanced-module/s3/gid-s3-04.png)

4. Upload 버튼을 클릭하고 Add files 버튼을 클릭합니다. 파일 탐색기를 통해서 미리 다운로드 받아둔 `aws.png` 파일을 선택합니다. 또는 해당 파일을 화면으로 Drag & Drop으로 가져다 놓습니다.

   ![upload_image](https://static.us-east-1.prod.workshops.aws/public/444df362-a211-4686-869b-77496f0dd3be/static/images/advanced-module/s3/gid-s3-05.png)

   ![upload_image_2](https://static.us-east-1.prod.workshops.aws/public/444df362-a211-4686-869b-77496f0dd3be/static/images/advanced-module/s3/gid-s3-06.png)

5. 업로드할 파일 정보 `aws.png` **파일을 확인**한 후, 하단의 **Upload** 버튼을 클릭하여 업로드합니다. 

   ![upload_click](https://static.us-east-1.prod.workshops.aws/public/444df362-a211-4686-869b-77496f0dd3be/static/images/advanced-module/s3/gid-s3-07.png)

6. `index.html`에 이미지 URL을 기입하기 위해서 URL 정보를 확인합니다. 업로드된 **`aws.png`** **파일을 선택**한 후, 우측에 나오는 상세 정보에서 ***Object URL*** 정보를 복사합니다. 

   ![object_url](https://static.us-east-1.prod.workshops.aws/public/444df362-a211-4686-869b-77496f0dd3be/static/images/advanced-module/s3/gid-s3-08.png)

7. `index.html`에 이미지의 URL 부분에서 복사해둔 Object URL을 붙여 넣습니다. 그리고 이미지를 클릭하면 앞서 생성했던 Web Server로 이동하도록 Web Server DNS 명을 붙입니다.

   ![ec2_dns_name](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.042.png)

   ![ec2_dns_name2](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.043.png)

8. 이미지 업로드한 방법과 같이 `index.html`파일도 S3에 업로드합니다.

   ![index_html](https://static.us-east-1.prod.workshops.aws/public/444df362-a211-4686-869b-77496f0dd3be/static/images/advanced-module/s3/gid-s3-11.png)

9.  업로드한 이미지를 확인하면 다음과 같습니다.

    ![upload_check](https://static.us-east-1.prod.workshops.aws/public/444df362-a211-4686-869b-77496f0dd3be/static/images/advanced-module/s3/gid-s3-12.png)


## 오브젝트 퍼블릭하게 설정하기
버킷에 오브젝트를 추가하였으면, 이제 웹 브라우저에서 해당 오브젝트를 확인해 보겠습니다.

1. Amazon S3 콘솔에서 확인하고자 하는 ***오브젝트를 클릭***합니다. 아래와 같이 오브젝트에 대한 상세 정보를 확인할 수 있습니다.

   ![object_info](https://static.us-east-1.prod.workshops.aws/public/444df362-a211-4686-869b-77496f0dd3be/static/images/advanced-module/s3/gid-s3-13.png)
   
   > 기본적으로 S3 버킷에 있는 모든 오브젝트는 Private(소유자 전용)으로 설정되어 있습니다. 즉, 버킷의 소유자를 제외한 다른 사람들은 오브젝트를 볼 수 없는 것입니다. `https://{Bucket}.s3.{region}.amazonaws.com/{Object}`와 같은 형식의 URL을 통해 해당 오브젝트를 확인하기 위해서는 외부사용자가 읽을 수 있도록 읽기 권한을 부여해야 합니다. 또는 해당 오브젝트에 대하여 인증 정보가 포함된 [presigned URL](https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/userguide/ShareObjectPreSignedURL.html)을 생성하여, 권한이 없는 사용자가 임시적으로 해당 오브젝트에 접근하게 할 수 있습니다.


2. 다시 이전 페이지로 돌아가 버킷의 **Permissions** 탭을 선택합니다. Block public access (bucket settings)의 적용 여부를 수정하기 위해, 오른쪽 **Edit** 버튼을 누릅니다. 

    ![edit_click](https://static.us-east-1.prod.workshops.aws/public/444df362-a211-4686-869b-77496f0dd3be/static/images/advanced-module/s3/gid-s3-14.png)


3. 맨 위의 **체크 박스를 선택 해제**하고 **Save chagnes** 버튼을 누릅니다.

   ![save_changes](https://static.us-east-1.prod.workshops.aws/public/444df362-a211-4686-869b-77496f0dd3be/static/images/advanced-module/s3/gid-s3-15.png)

4. 버킷의 퍼블릭 액세스 차단 편집 팝업 창에서 `confirm`을 입력하고 **Confirm** 버튼을 누릅니다.

   ![confirm_click](https://static.us-east-1.prod.workshops.aws/public/444df362-a211-4686-869b-77496f0dd3be/static/images/advanced-module/s3/gid-s3-16.png)

5. "Permission" 탭에서 아래 쪽의 "**Bucket Policy**" 섹션에 **Edit** 버튼을 클릭하여 퍼블릭하게 액세스할 수 있는 정책을 지정합니다.

    ![policy_edit](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.051.png)

   ```JSON
   {
        "Version": "2012-10-17",
        "Statement": [
            {
                "Sid": "PublicReadGetObject",
                "Effect": "Allow",
                "Principal": "*",
                "Action": "s3:GetObject",
                "Resource": "arn:aws:s3:::버킷명/*"
            }
        ]
    }  
   ```
   입력한 뒤, **Save changes** 버튼을 클릭하여 저장합니다.

6. 버킷 페이지로 다시 돌아와 **index.html** 을 선택하고 "Properties" 탭에서 **Object URL 링크**를 클릭합니다.

   ![object_url](https://static.us-east-1.prod.workshops.aws/public/444df362-a211-4686-869b-77496f0dd3be/static/images/advanced-module/s3/gid-s3-19.png)

7. HTML 오브젝트 파일 객체의 URL에 접속하면 아래와 같은 화면이 출력됩니다.

   ![url_check](https://static.us-east-1.prod.workshops.aws/public/444df362-a211-4686-869b-77496f0dd3be/static/images/advanced-module/s3/gid-s3-20.png)

8. 이미지를 클릭하면 생성했던 인스턴스 페이지로 리다이렉트됩니다.

   ![instance_redirection](https://static.us-east-1.prod.workshops.aws/public/444df362-a211-4686-869b-77496f0dd3be/static/images/advanced-module/s3/gid-s3-21.png)

## 정적 웹사이트 호스팅 설정
> 정적 웹 사이트란, 웹 페이지에 정적 콘텐츠(HTML, 이미지, 비디오) 또는 클라이언트 측 스크립트(Javascript)만을 포함하는 웹 사이트를 가리킵니다. 이와는 대조적으로 동적 웹 사이트의 경우 PHP, JSP 또는 ASP.NET과 같은 서버 측 스크립트를 포함한 서버 측 처리를 필요로 합니다. Amazon S3에서는 서버 측 스크립팅을 지원하지 않습니다. 동적 웹 사이트를 호스팅하고자 하는 경우, AWS의 EC2와 같은 다른 서비스를 사용하면 됩니다.

1. S3 콘솔에서 생성한 버킷을 선택하고, **Properties** 탭을 클릭합니다. 스크롤을 내려 **Static website hosting**의 **Edit** 버튼을 클릭합니다.

   ![static_hosting_edit](https://static.us-east-1.prod.workshops.aws/public/444df362-a211-4686-869b-77496f0dd3be/static/images/advanced-module/s3/gid-s3-22.png)

   ![static_hosting_edit_2](https://static.us-east-1.prod.workshops.aws/public/444df362-a211-4686-869b-77496f0dd3be/static/images/advanced-module/s3/gid-s3-22-1.png)

2. 정적 웹사이트 호스팅 기능에 대한 설정을 수정합니다.

   ![hosting_edit](https://static.us-east-1.prod.workshops.aws/public/444df362-a211-4686-869b-77496f0dd3be/static/images/advanced-module/s3/gid-s3-23-1.png)

   - Static website hosting: `Enable` 선택 (정적 웹사이트 호스팅 기능 활성화)
    - Hosting type: `Host a static website` 선택
    - Index documet: `index.html` 입력
    - Error document: `index.html` 입력


3. "Static website hosting" 항목에 생성된 **Bucket website endpoint**를 클릭하여 정적 웹사이트로 접속합니다.
   
   ![enter_website](https://static.us-east-1.prod.workshops.aws/public/444df362-a211-4686-869b-77496f0dd3be/static/images/advanced-module/s3/gid-s3-23-1.png)

접속이 잘 되는 것을 확인할 수 있습니다 :) 

이처럼 Amazon S3를 이용하여 정적 웹 사이트를 호스팅할 수 있습니다!

![img_3](https://static.us-east-1.prod.workshops.aws/public/444df362-a211-4686-869b-77496f0dd3be/static/images/advanced-module/s3/gid-s3-24.png)


# [6] 실습 자원 삭제하기
## Empty bucket - 모든 객체 삭제
버킷에 저장된 모든 객체를 삭제하고 싶은 경우에는 S3 콘솔에서 Empty 버튼을 클릭하면 됩니다.

1. S3 콘솔에서 이번 실습에서 생성한 **버킷**(라디오 버튼)을 선택한 후, **Empty** 버튼을 클릭합니다.

   ![empty_click](https://static.us-east-1.prod.workshops.aws/public/444df362-a211-4686-869b-77496f0dd3be/static/images/storage/28-s3-empty-bucket.png)

2. "Empty bucket" 페이지로 이동한 후, `permanently delete`를 입력합니다. 그 후, Empty 버튼을 클릭하여 모든 객체를 영구적으로 삭제합니다.

   ![permanent_delete](https://static.us-east-1.prod.workshops.aws/public/444df362-a211-4686-869b-77496f0dd3be/static/images/storage/29-s3-empty-bucket.png)

3. "Empty bucket:status" 페이지로 이동된 후, 모든 버킷의 객체가 삭제되었다는 메세지를 확인할 수 있습니다. **Exit** 버튼을 클릭한 후, S3 콘솔로 다시 돌아갑니다. 

   ![exit_click](https://static.us-east-1.prod.workshops.aws/public/444df362-a211-4686-869b-77496f0dd3be/static/images/storage/30-s3-successfully-emptied-bucket.png)

## 버킷 삭제
버킷에 저장된 모든 객체가 삭제되었으니, 이제 버킷을 삭제할 수 있습니다.

1. S3 콘솔에서 이번 실습에서 생성한 **버킷**을 선택합니다.
   
   ![bucket_select](https://static.us-east-1.prod.workshops.aws/public/444df362-a211-4686-869b-77496f0dd3be/static/images/storage/31-s3-select-bucket.png)

2. 현재 버킷이 비워진 상태라는 것을 확인할 수 있습니다. "**Show Versions**" 토글 버튼을 활성화시켜 구 버전도 잘 삭제되었는지 확인합니다.
   
   ![version_delete](https://static.us-east-1.prod.workshops.aws/public/444df362-a211-4686-869b-77496f0dd3be/static/images/storage/32-confirm-empty-bucket.png)

3. "Buckets" 페이지로 다시 돌아간 후, 버킷 왼쪽의 라디오 버튼을 클릭하고 **Delete** 버튼을 클릭합니다.
   
   ![delete_click](https://static.us-east-1.prod.workshops.aws/public/444df362-a211-4686-869b-77496f0dd3be/static/images/storage/33-s3-select-bucket-for-delete.png)

4. "Delete bucket" 페이지에서 버킷의 이름(`<name>-stem-s3-lab`)을 입력한 후, **Delete** 버튼을 클릭합니다. 
   
   ![delete_click_2](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.064.png)

    삭제가 완료되면, "Successfully deleted bucket `<name>-stem-s3-lab`" 메세지와 함께 S3 버킷 페이지로 다시 이동됩니다.
    
    ![delete_check](https://stem-workshop.s3.ap-northeast-2.amazonaws.com/image/Aspose.Words.2808f8dd-4c88-44c6-91d1-5c381d6d1e6a.065.png)
